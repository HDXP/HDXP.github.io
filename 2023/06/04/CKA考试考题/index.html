<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>CKA考试题 | 邯郸小胖</title><meta name="author" content="邯郸小胖"><meta name="copyright" content="邯郸小胖"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="​ 1. 权限控制RBAC考题：    设置配置环境：    [candidate@node-1] $ kubectl config use-context k8s    Context    为部署流水线创建一个新的 ClusterRole 并将其绑定到范围为特定的 namespace 的特定 ServiceAccount。    Task    创建一名为 deployment-cluster">
<meta property="og:type" content="article">
<meta property="og:title" content="CKA考试题">
<meta property="og:url" content="http://example.com/2023/06/04/CKA%E8%80%83%E8%AF%95%E8%80%83%E9%A2%98/index.html">
<meta property="og:site_name" content="邯郸小胖">
<meta property="og:description" content="​ 1. 权限控制RBAC考题：    设置配置环境：    [candidate@node-1] $ kubectl config use-context k8s    Context    为部署流水线创建一个新的 ClusterRole 并将其绑定到范围为特定的 namespace 的特定 ServiceAccount。    Task    创建一名为 deployment-cluster">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/HDXP/storage/blob/master/avatar.jpg?raw=true">
<meta property="article:published_time" content="2023-06-04T10:30:00.000Z">
<meta property="article:modified_time" content="2023-06-27T09:07:51.718Z">
<meta property="article:author" content="邯郸小胖">
<meta property="article:tag" content="k8s">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/HDXP/storage/blob/master/avatar.jpg?raw=true"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/06/04/CKA%E8%80%83%E8%AF%95%E8%80%83%E9%A2%98/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'CKA考试题',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-06-27 09:07:51'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://github.com/HDXP/storage/blob/master/avatar.jpg?raw=true" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">5</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="邯郸小胖"><span class="site-name">邯郸小胖</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">CKA考试题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-04T10:30:00.000Z" title="发表于 2023-06-04 10:30:00">2023-06-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-06-27T09:07:51.718Z" title="更新于 2023-06-27 09:07:51">2023-06-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/k8s/">k8s</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="CKA考试题"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><p>​</p>
<h1 id="1-权限控制RBAC"><a href="#1-权限控制RBAC" class="headerlink" title="1. 权限控制RBAC"></a>1. 权限控制RBAC</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong></p>
<p>   [candidate@node-1] $ kubectl config use-context k8s </p>
<p>  <strong>Context</strong> </p>
<p>  为部署流水线创建一个新的 ClusterRole 并将其绑定到范围为特定的 namespace 的特定 ServiceAccount。 </p>
<p>  <strong>Task</strong> </p>
<p>  创建一名为 deployment-clusterrole 且仅允许创建以下资源类型的新 ClusterRole： </p>
<p>  Deployment </p>
<p>  StatefulSet </p>
<p>  DaemonSet </p>
<p>  在现有的 namespace app-team1 中创建一个名为 cicd-token 的新 ServiceAccount。 </p>
<p>  限于 namespace app-team1 中，将新的 ClusterRole deployment-clusterrole 绑定到新的 ServiceAccount cicd-token。</p>
</blockquote>
<p><strong>考点：RBAC 授权模型的理解。</strong></p>
<p>参考链接</p>
<p>没必要参考网址，使用-h 帮助更方便。 </p>
<p>kubectl create clusterrole -h </p>
<p>kubectl create rolebinding -h</p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/#command-line-utilities">https://kubernetes.io/docs/reference/access-authn-authz/rbac/#command-line-utilities</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context k8s</span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line">kubectl create clusterrole deployment-clusterrole --verb=create --resource=deployments,statefulsets,daemonsets</span><br><span class="line">kubectl -n app-team1 create serviceaccount cicd-token</span><br><span class="line"><span class="comment"># 题目中写了“限于 namespace app-team1 中”，则创建 rolebinding。没有写的话，则创建 clusterrolebinding。</span></span><br><span class="line">kubectl -n app-team1 create rolebinding cicd-token-rolebinding --clusterrole=deployment-clusterrole --serviceaccount=app-team1:cicd-token</span><br><span class="line"><span class="comment"># rolebinding 后面的名字 cicd-token-rolebinding 随便起的，因为题目中没有要求，如果题目中有要求，就不能随便起了。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#检查（考试时，可以不检查的）</span></span><br><span class="line">kubectl -n app-team1 describe rolebinding cicd-token-rolebinding</span><br><span class="line"></span><br><span class="line"><span class="comment">#网友 Wang_jinpen*提供的检查方法：</span></span><br><span class="line">candidate@node01:~$ kubectl auth can-i create deployment --as system:serviceaccount:app-team1:cicd-token</span><br><span class="line">no</span><br><span class="line">candidate@node01:~$ kubectl auth can-i create deployment -n app-team1 --as system:serviceaccount:app-team1:cicd-token</span><br><span class="line"><span class="built_in">yes</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<hr>
<h1 id="2-查看pod的cpu（简单）"><a href="#2-查看pod的cpu（简单）" class="headerlink" title="2. 查看pod的cpu（简单）"></a>2. 查看pod的cpu（简单）</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong> </p>
<p>  [candidate@node-1] $ kubectl config use-context k8s </p>
<p>  <strong>Task</strong> </p>
<p>  通过 pod label name&#x3D;cpu-loader，找到运行时占用大量 CPU 的 pod， 并将占用 CPU 最高的 pod 名称写入文件 &#x2F;opt&#x2F;KUTR000401&#x2F;KUTR00401.txt（已存在）。</p>
</blockquote>
<p><strong>考点：kubectl top –l 命令的使用</strong></p>
<p>参考链接  </p>
<p>没必要参考网址，使用-h 帮助更方便。 </p>
<p>kubectl top pod -h </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/#interacting-with-running-pods">https://kubernetes.io/docs/reference/kubectl/cheatsheet/#interacting-with-running-pods</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context k8s</span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line"><span class="comment"># 查看 pod 名称 -A 是所有 namespace</span></span><br><span class="line">kubectl top pod -l name=cpu-loader --sort-by=cpu -A</span><br><span class="line"><span class="comment"># 将 cpu 占用最多的 pod 的 name 写入/opt/test1.txt 文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;查出来的 Pod Name&quot;</span> &gt; /opt/KUTR000401/KUTR00401.txt</span><br><span class="line">检查</span><br><span class="line"><span class="built_in">cat</span> /opt/KUTR000401/KUTR00401.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<hr>
<h1 id="3-配置网络策略-NetworkPolicy"><a href="#3-配置网络策略-NetworkPolicy" class="headerlink" title="3. 配置网络策略 NetworkPolicy"></a>3. 配置网络策略 NetworkPolicy</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong></p>
<p>   [candidate@node-1] $ kubectl config use-context hk8s </p>
<p>  <strong>Task</strong> </p>
<p>  在现有的 namespace my-app 中创建一个名为 allow-port-from-namespace 的新 NetworkPolicy。 </p>
<p>  确保新的 NetworkPolicy 允许 namespace echo 中的 Pods 连接到 namespace my-app 中的 Pods 的 9000 端口。 </p>
<p>  进一步确保新的 NetworkPolicy： </p>
<p>  <strong>不允许</strong>对没有在监听 端口 9000 的 Pods 的访问 </p>
<p>  <strong>不允许</strong>非来自 namespace echo 中的 Pods 的访问</p>
</blockquote>
<p><u>双重否定就是肯定，所以最后两句话的意思就是： 仅允许端口为 9000 的 pod 方法。 仅允许 echo 命名空间中的 pod 访问。</u></p>
<p><strong>考点：NetworkPolicy 的创建</strong></p>
<p>参考链接  </p>
<p>（需要复制网页内容） </p>
<p>依次点击 Concepts → Services, Load Balancing, and Networking → Network Policies（看不懂英文的，可右上角翻译成中文）</p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/concepts/services-networking/network-policies/">https://kubernetes.io/zh-cn/docs/concepts/services-networking/network-policies/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context hk8s</span><br><span class="line"><span class="comment">#参考官方文档，拷贝 yaml 文件内容，并修改。</span></span><br><span class="line"><span class="comment">#这里要注意，模拟题和真题截图里都有提到 echo 这个 namespace，但是和真题的截图比较，你会发现，两个 echo 出现的位置不同，一个作为访问者，一个作为被访问者。</span></span><br><span class="line"><span class="comment">#所以不要搞混了。他们其实只是个名字而已，叫什么都无所谓，但要分清访问和被访问。</span></span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line"><span class="comment">#查看所有 ns 的标签 label</span></span><br><span class="line">kubectl get ns --show-labels</span><br><span class="line"><span class="comment">#如果访问者的 namespace 没有标签 label，则需要手动打一个。如果有一个独特的标签 label，则也可以直接使用。</span></span><br><span class="line">kubectl label ns <span class="built_in">echo</span> project=<span class="built_in">echo</span></span><br><span class="line"><span class="comment">#编写一个 yaml 文件</span></span><br><span class="line">vim networkpolicy.yaml</span><br><span class="line"><span class="comment">#注意 :set paste，防止 yaml 文件空格错序。</span></span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: NetworkPolicy</span><br><span class="line">metadata:</span><br><span class="line">  name: allow-port-from-namespace</span><br><span class="line">  namespace: my-app <span class="comment">#被访问者的命名空间</span></span><br><span class="line">spec:</span><br><span class="line">  podSelector: <span class="comment">#这两行必须要写，或者也可以写成一行为 podSelector: &#123;&#125;</span></span><br><span class="line">    matchLabels: &#123;&#125; <span class="comment"># 注意 matchLabels:与&#123;&#125;之间有一个空格</span></span><br><span class="line">  policyTypes:</span><br><span class="line">  - Ingress <span class="comment">#策略影响入栈流量</span></span><br><span class="line">  ingress:</span><br><span class="line">  - from: <span class="comment">#允许流量的来源</span></span><br><span class="line">    - namespaceSelector:</span><br><span class="line">      matchLabels:</span><br><span class="line">        project: <span class="built_in">echo</span> <span class="comment">#访问者的命名空间的标签 label</span></span><br><span class="line">  <span class="comment">#- podSelector: &#123;&#125; #注意，这个不写。如果 ingress 里也写了- podSelector: &#123;&#125;，则会导致 my-app 中的 pod 可以访问 my-app 中 pod 的 9000 了，这样不满足题目要求不允许非来自 namespace echo 中的 Pods 的访问。</span></span><br><span class="line">  ports:</span><br><span class="line">  - protocol: TCP</span><br><span class="line">    port: 9000 <span class="comment">#被访问者公开的端口</span></span><br><span class="line"><span class="comment">#创建</span></span><br><span class="line">kubectl apply -f networkpolicy.yaml</span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line">kubectl describe networkpolicy -n my-app</span><br></pre></td></tr></table></figure>



<hr>
<h1 id="4-暴露服务-service"><a href="#4-暴露服务-service" class="headerlink" title="4. 暴露服务 service"></a>4. 暴露服务 service</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong></p>
<p>  [candidate@node-1] $ kubectl config use-context k8s </p>
<p>  <strong>Task</strong></p>
<p>  请重新配置现有的 deployment front-end 以及添加名为 http 的端口规范来公开现有容器 nginx 的端口 80&#x2F;tcp。</p>
<p>  创建一个名为 front-end-svc 的新 service，以公开容器端口 http。</p>
<p>  配置此 service，以通过各个 Pod 所在的节点上的 NodePort 来公开他们。</p>
</blockquote>
<p><strong>考点：将现有的 deploy 暴露成 nodeport 的 service。</strong></p>
<p>参考链接  </p>
<p>（需要复制网页内容） </p>
<p>依次点击 Concepts → Workloads → Workload Resources → Deployments（看不懂英文的，可右上角翻译成中文） </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/deployment/">https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/deployment/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context k8s</span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line"><span class="comment">#检查 deployment 信息，并记录 SELECTOR 的 Lable 标签，这里是 app=front-end</span></span><br><span class="line">kubectl get deployment front-end -o wide</span><br><span class="line"><span class="comment">#参考官方文档，按照需要 edit deployment，添加端口信息</span></span><br><span class="line">kubectl edit deployment front-end</span><br><span class="line"><span class="comment">#注意 :set paste，防止 yaml 文件空格错序。</span></span><br><span class="line">spec:</span><br><span class="line"> containers:</span><br><span class="line"> - image: vicuu/nginx:hello</span><br><span class="line">   imagePullPolicy: IfNotPresent</span><br><span class="line">   name: nginx <span class="comment">#找到此位置。</span></span><br><span class="line">   ports: <span class="comment">#添加这 4 行</span></span><br><span class="line">     - name: http</span><br><span class="line">       containerPort: 80</span><br><span class="line">       protocol: TCP</span><br><span class="line"></span><br><span class="line"><span class="comment">#暴露对应端口</span></span><br><span class="line">kubectl expose deployment front-end --<span class="built_in">type</span>=NodePort --port=80 --target-port=80 --name=front-end-svc</span><br><span class="line"><span class="comment">#注意考试中需要创建的是 NodePort，还是 ClusterIP。如果是 ClusterIP，则应为--type=ClusterIP</span></span><br><span class="line"><span class="comment">#--port 是 service 的端口号，--target-port 是 deployment 里 pod 的容器的端口号。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#暴露服务后，检查一下 service 的 selector 标签是否正确，这个要与 deployment 的 selector 标签一致的。</span></span><br><span class="line">kubectl get svc front-end-svc -o wide</span><br><span class="line">kubectl get deployment front-end -o wide</span><br><span class="line"><span class="comment">#如果你 kubectl expose 暴露服务后，发现 service 的 selector 标签是空的&lt;none&gt;，或者不是 deployment 的。</span></span><br><span class="line"><span class="comment">#则需要编辑此 service，手动添加标签。（模拟环境里暴露服务后，selector 标签是正确的。但是考试时，有时 service 的 selector 标签是 none）</span></span><br><span class="line">kubectl edit svc front-end-svc</span><br><span class="line"><span class="comment">#在 ports 这一小段下面添加 selector 标签</span></span><br><span class="line"> selector:</span><br><span class="line">   app: front-end <span class="comment">#注意 yaml 里是写冒号，而不是等号，不是 app=front-end。</span></span><br><span class="line"><span class="comment">#确保 service 的 selector 标签与 deployment 的 selector 标签一致。</span></span><br><span class="line"><span class="comment">#最后 curl 检查</span></span><br><span class="line">kubectl get pod,svc -o wide</span><br><span class="line"><span class="comment">#curl 所在的 node 的 ip 或主机名:30938</span></span><br><span class="line"><span class="comment">#curl svc 的 ip 地址:80</span></span><br><span class="line"><span class="comment">#（注意，只能 curl 通 svc 的 80 端口，但是无法 ping 通的。）</span></span><br><span class="line"><span class="comment">#考试时，如果 curl 不通，简单排错后也不通，就不要过于纠结，继续往下做题即可。因为部分同学反馈 curl 不通，不清楚是否为考试集群环境的问题。（有同学反馈是要 ssh 到 master 上，才能 curl 通，所以这道题不检查也行的）</span></span><br><span class="line"><span class="comment">#只要确保都做对了，即使 curl 不通，也最多扣几分而已，是有其他步骤分的。</span></span><br></pre></td></tr></table></figure>



<hr>
<h1 id="5-创建-Ingress"><a href="#5-创建-Ingress" class="headerlink" title="5. 创建 Ingress"></a>5. 创建 Ingress</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong> </p>
<p>  [candidate@node-1] $ kubectl config use-context k8s </p>
<p>  <strong>Task</strong> </p>
<p>  如下创建一个新的 nginx Ingress 资源： </p>
<p>  名称: ping </p>
<p>  Namespace: ing-internal </p>
<p>  使用服务端口 5678 在路径 &#x2F;hello 上公开服务 hello </p>
<p>  可以使用以下命令检查服务 hello 的可用性，该命令应返回 hello： </p>
<p>  curl -kL <INTERNAL_IP>&#x2F;hello</p>
</blockquote>
<p><strong>考点：Ingress 的创建</strong></p>
<p>参考链接  </p>
<p>（需要复制网页内容） </p>
<p>依次点击 Concepts → Services, Load Balancing, and Networking → Ingress （看不懂英文的，可右上角翻译成中文）</p>
<p> <a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress/">https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context k8s</span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line"><span class="comment">#方法 1：（推荐）</span></span><br><span class="line"><span class="comment">#拷贝官文的 yaml 案例，修改相关参数即可</span></span><br><span class="line">vim ingress.yaml</span><br><span class="line"><span class="comment">#注意 :set paste，防止 yaml 文件空格错序。</span></span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: IngressClass</span><br><span class="line">metadata:</span><br><span class="line"> labels:</span><br><span class="line"> app.kubernetes.io/component: controller</span><br><span class="line"> name: nginx-example <span class="comment">#考试时，默认是没有 ingressClassName 的，所以我们要先手动建一个 ingressClassName，命名就为 nginx-example 吧</span></span><br><span class="line"> annotations:</span><br><span class="line"> ingressclass.kubernetes.io/is-default-class: <span class="string">&quot;true&quot;</span></span><br><span class="line">spec:</span><br><span class="line"> controller: k8s.io/ingress-nginx</span><br><span class="line">--- <span class="comment">#这 3 个---，必须要写，不能省略</span></span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: Ingress</span><br><span class="line">metadata:</span><br><span class="line"> name: ping</span><br><span class="line"> namespace: ing-internal</span><br><span class="line"> annotations:</span><br><span class="line"> nginx.ingress.kubernetes.io/rewrite-target: / <span class="comment">#因为考试环境有多套，不清楚具体抽中的是哪套。在 1.26 的考试里，先写上这行，如果 apply 时报错需</span></span><br><span class="line">要指定域名，则注释这行再 apply，就成功了。</span><br><span class="line">spec:</span><br><span class="line"> ingressClassName: nginx-example <span class="comment">#这里调用上面新建的 ingressClassName 为 nginx-example</span></span><br><span class="line"> rules:</span><br><span class="line"> - http:</span><br><span class="line"> paths:</span><br><span class="line"> - path: /hello</span><br><span class="line"> pathType: Prefix</span><br><span class="line"> backend:</span><br><span class="line"> service:</span><br><span class="line"> name: hello</span><br><span class="line"> port:</span><br><span class="line"> number: 5678</span><br><span class="line"> </span><br><span class="line"><span class="comment">#创建</span></span><br><span class="line">kubectl apply -f ingress.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment">#最后 curl 检查</span></span><br><span class="line"><span class="comment"># 通过 get ingress 查看 ingress 的内外 IP，然后通过提供的 curl 测试 ingress 是否正确。</span></span><br><span class="line"><span class="comment"># 做完题后，略等 3 分钟，再检查，否则可能还没获取 IP 地址。或者可以先去做别的题，等都做完了，再回来检查这道题，一下，记得回来检查时，</span></span><br><span class="line"><span class="comment">#先使用 </span></span><br><span class="line">ubectl config use-context k8s <span class="comment">#切换到此集群。</span></span><br><span class="line">kubectl get ingress -n ing-internal</span><br><span class="line">curl ingress 的 ip 地址/hello</span><br></pre></td></tr></table></figure>



<hr>
<h1 id="6-扩容-deployment-副本数量（简单）"><a href="#6-扩容-deployment-副本数量（简单）" class="headerlink" title="6. 扩容 deployment 副本数量（简单）"></a>6. 扩容 deployment 副本数量（简单）</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong> </p>
<p>  [candidate@node-1] $ kubectl config use-context k8s </p>
<p>  <strong>Task</strong> </p>
<p>  将 deployment presentation 扩展至 4 个 pods</p>
</blockquote>
<p>参考链接  没必要参考网址，使用-h 帮助更方便。 </p>
<p>kubectl scale deployment -h</p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/deployment/#scaling-a-deployment">https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/deployment/#scaling-a-deployment</a> </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/tasks/run-application/scale-stateful-set/">https://kubernetes.io/zh-cn/docs/tasks/run-application/scale-stateful-set/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context k8s</span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line"><span class="comment">#先检查一下现有的 pod 数量（可不检查）</span></span><br><span class="line">kubectl get deployments presentation -o wide</span><br><span class="line">kubectl get pod -l app=presentation</span><br><span class="line"><span class="comment">#扩展成 4 个</span></span><br><span class="line">kubectl scale deployment presentation --replicas=4</span><br><span class="line"><span class="comment">#检查，如果显示 ContainerCreating，则表示你的集群有问题，99%是因为你对 VMware 快照的错误操作。</span></span><br><span class="line"><span class="comment">#请务必确保你的 3 台虚拟机是还原到一个关机状态的快照（如初始化快照）。而不是还原到一个开机状态下打的快照！</span></span><br><span class="line">kubectl get deployments presentation -o wide</span><br><span class="line">kubectl get pod -l app=presentation</span><br></pre></td></tr></table></figure>



<hr>
<h1 id="7-调度-pod-到指定节点"><a href="#7-调度-pod-到指定节点" class="headerlink" title="7. 调度 pod 到指定节点"></a>7. 调度 pod 到指定节点</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong></p>
<p>   [candidate@node-1] $ kubectl config use-context k8s </p>
<p>  <strong>Task</strong> </p>
<p>  按如下要求调度一个 pod：</p>
<p>   名称：nginx-kusc00401</p>
<p>   Image：nginx </p>
<p>   Node selector：disk&#x3D;ssd</p>
</blockquote>
<p><strong>考点：nodeSelect 属性的使用</strong></p>
<p>参考链接  （需要复制网页内容） </p>
<p>依次点击 Tasks → Configure Pods and Containers → Assign Pods to Nodes （看不懂英文的，可右上角翻译成中文） </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/assign-pods-nodes/">https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/assign-pods-nodes/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context k8s</span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line"><span class="comment">#先检查一下是否有这个 pod，应该是没有创建的，所以需要创建</span></span><br><span class="line">kubectl get pod -A|grep nginx-kusc00401</span><br><span class="line"><span class="comment"># 确保 node 有这个 labels，考试时，检查一下就行，应该已经提前设置好了 labels。</span></span><br><span class="line">kubectl get nodes --show-labels|grep <span class="string">&#x27;disk=ssd&#x27;</span></span><br><span class="line"><span class="comment">#如果没有设置，则使用 kubectl label nodes node01 disk=ssd 命令来手动自己设置。</span></span><br><span class="line"><span class="comment">#拷贝官文案例，修改下 pod 名称和镜像，删除多余的部分即可</span></span><br><span class="line">vim pod-disk-ssd.yaml</span><br><span class="line"><span class="comment">#注意 :set paste，防止 yaml 文件空格错序。</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line"> name: nginx-kusc00401</span><br><span class="line">spec:</span><br><span class="line"> containers:</span><br><span class="line"> - name: nginx</span><br><span class="line"> image: nginx</span><br><span class="line"> imagePullPolicy: IfNotPresent <span class="comment">#这句的意思是，如果此 image 已经有了，则不重新下载。考试时写不写这个都是可以的。</span></span><br><span class="line"> nodeSelector:</span><br><span class="line"> disk: ssd</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建</span></span><br><span class="line">kubectl apply -f pod-disk-ssd.yaml</span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line">kubectl get pod nginx-kusc00401 -o wide</span><br></pre></td></tr></table></figure>



<hr>
<h1 id="8-查看可用节点数量-简单"><a href="#8-查看可用节点数量-简单" class="headerlink" title="8. 查看可用节点数量(简单)"></a>8. 查看可用节点数量(简单)</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong> </p>
<p>  [candidate@node-1] $ kubectl config use-context k8s </p>
<p>  <strong>Task</strong> </p>
<p>  检查有多少 nodes 已准备就绪（不包括被打上 Taint：NoSchedule 的节点）， 并将数量写入 &#x2F;opt&#x2F;KUSC00402&#x2F;kusc00402.txt</p>
</blockquote>
<p><strong>考点：检查节点角色标签，状态属性，污点属性的使用</strong></p>
<p>参考链接  </p>
<p>没必要参考网址，使用-h 帮助更方便。 </p>
<p>kubectl -h </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/taint-and-toleration/">https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/taint-and-toleration/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context k8s</span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line"><span class="comment">#先检查一共有多少就绪节点，状态为 Ready 表示就绪，下图可以看到一共是 3 个就绪节点。</span></span><br><span class="line">kubectl get nodes</span><br><span class="line"><span class="comment">#因为题目要求，不包括被打上 Taint：NoSchedule 的就绪节点，所以要排除 NoSchedule 的。</span></span><br><span class="line"><span class="comment">#然后使用如下命令，就能一眼看出来，几个打了 NoSchedule，几个没有打的。</span></span><br><span class="line"><span class="comment">#下图可见 1 个 master01 打了 NoSchedule，所以 3-1=2</span></span><br><span class="line">kubectl describe nodes | grep -i Taints</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;查出来的数字&quot;</span> &gt; /opt/KUSC00402/kusc00402.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#还有一个方法：</span></span><br><span class="line"><span class="comment"># grep 的-i 是忽略大小写，grep -v 是排除在外，grep -c 是统计查出来的条数。</span></span><br><span class="line">kubectl describe nodes | grep -i Taints | grep -vc NoSchedule</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;查出来的数字&quot;</span> &gt; /opt/KUSC00402/kusc00402.txt</span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line"><span class="built_in">cat</span> /opt/KUSC00402/kusc00402.txt</span><br></pre></td></tr></table></figure>



<hr>
<h1 id="9-创建多容器的-pod-简单"><a href="#9-创建多容器的-pod-简单" class="headerlink" title="9. 创建多容器的 pod(简单)"></a>9. 创建多容器的 pod(简单)</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong> </p>
<p>  [candidate@node-1] $ kubectl config use-context k8s </p>
<p>  <strong>Task</strong> </p>
<p>  按如下要求调度一个 Pod： </p>
<p>  名称：kucc8 </p>
<p>  app containers: 2 </p>
<p>  container 名称&#x2F;images： </p>
<ul>
<li><p>nginx </p>
</li>
<li><p>consul</p>
</li>
</ul>
</blockquote>
<p><strong>考点：pod 概念</strong></p>
<p>*参考链接  </p>
<p>（需要复制网页内容） </p>
<p>依次点击 Concepts → Workloads → Pods （看不懂英文的，可右上角翻译成中文） </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/concepts/workloads/pods/">https://kubernetes.io/zh-cn/docs/concepts/workloads/pods/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context k8s</span><br><span class="line"><span class="comment">#可以参考上一题“调度 pod 到指定节点”的 yaml 配置文件。</span></span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line">vim pod-kucc.yaml</span><br><span class="line"><span class="comment">#注意 :set paste，防止 yaml 文件空格错序。</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line"> name: kucc8</span><br><span class="line">spec:</span><br><span class="line"> containers:</span><br><span class="line"> - name: nginx</span><br><span class="line"> image: nginx</span><br><span class="line"> imagePullPolicy: IfNotPresent <span class="comment">#这句的意思是，如果此 image 已经有了，则不重新下载。考试时写不写都可以。但模拟环境里推荐写，pod 启动快。</span></span><br><span class="line"> - name: consul</span><br><span class="line"> image: consul</span><br><span class="line"> imagePullPolicy: IfNotPresent</span><br><span class="line"><span class="comment">#创建</span></span><br><span class="line">kubectl apply -f pod-kucc.yaml</span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line">kubectl get pod kucc8</span><br></pre></td></tr></table></figure>



<hr>
<h1 id="10-创建-PV"><a href="#10-创建-PV" class="headerlink" title="10. 创建 PV"></a>10. 创建 PV</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong> </p>
<p>  [candidate@node-1] $ kubectl config use-context hk8s </p>
<p>  <strong>Task</strong> </p>
<p>  创建名为 app-config 的 persistent volume，容量为 1Gi，访问模式为 ReadWriteMany。 </p>
<p>  volume 类型为 hostPath，位于 &#x2F;srv&#x2F;app-config</p>
</blockquote>
<p><strong>考点：hostPath 类型的 pv</strong></p>
<p>参考链接  </p>
<p>（需要复制网页内容） </p>
<p>依次点击 Tasks → Configure Pods and Containers → Configure a Pod to Use a PersistentVolume for Storage （看不懂英文的，可右上角翻译成中文） </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-persistent-volume-storage/">https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-persistent-volume-storage/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context k8s</span><br><span class="line"><span class="comment">#直接从官方复制合适的案例，修改参数，然后设置 hostPath 为 /srv/app-config 即可。</span></span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line">vim pv.yaml</span><br><span class="line"><span class="comment">#注意 :set paste，防止 yaml 文件空格错序。</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolume</span><br><span class="line">metadata:</span><br><span class="line"> name: app-config</span><br><span class="line"> <span class="comment">#labels: #不需要写</span></span><br><span class="line"> <span class="comment">#type: local</span></span><br><span class="line">spec:</span><br><span class="line"> capacity:</span><br><span class="line"> storage: 1Gi</span><br><span class="line"> accessModes:</span><br><span class="line"> - ReadWriteMany <span class="comment"># 注意，考试时的访问模式可能有 ReadWriteMany 和 ReadOnlyMany 和 ReadWriteOnce，根据题目要求写。</span></span><br><span class="line"> hostPath:</span><br><span class="line"> path: <span class="string">&quot;/srv/app-config&quot;</span></span><br><span class="line"><span class="comment">#创建</span></span><br><span class="line">kubectl apply -f pv.yaml</span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line">kubectl get pv</span><br><span class="line"><span class="comment"># RWX 是 ReadWriteMany，RWO 是 ReadWriteOnce。</span></span><br></pre></td></tr></table></figure>



<hr>
<h1 id="11-创建-PVC"><a href="#11-创建-PVC" class="headerlink" title="11. 创建 PVC"></a>11. 创建 PVC</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong></p>
<p>   [candidate@node-1] $ kubectl config use-context ok8s </p>
<p>  <strong>Task</strong> </p>
<p>  创建一个新的 PersistentVolumeClaim： </p>
<p>  名称: pv-volume </p>
<p>  Class: csi-hostpath-sc </p>
<p>  容量: 10Mi </p>
<p>  创建一个新的 Pod，来将 PersistentVolumeClaim 作为 volume 进行挂载： </p>
<p>  名称：web-server </p>
<p>  Image：nginx:1.16 </p>
<p>  挂载路径：&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html </p>
<p>  配置新的 Pod，以对 volume 具有 ReadWriteOnce 权限。 </p>
<p>  最后，使用 kubectl edit 或 kubectl patch 将 PersistentVolumeClaim 的容量扩展为 70Mi，并记录此更改。</p>
</blockquote>
<p><strong>考点：pvc 的创建 class 属性的使用，–record 记录变更</strong></p>
<p>参考链接  </p>
<p>（需要复制网页内容） </p>
<p>依次点击 Tasks → Configure Pods and Containers → Configure a Pod to Use a PersistentVolume for Storage （看不懂英文的，可右上角翻译成中文） </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-persistent-volume-storage/">https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-persistent-volume-storage/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context ok8s</span><br><span class="line"><span class="comment">#根据官方文档复制一个 PVC 配置，修改参数，不确定的地方就是用 kubectl 的 explain 帮助。</span></span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line">vim pvc.yaml</span><br><span class="line"><span class="comment">#注意 :set paste，防止 yaml 文件空格错序。</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line"> name: pv-volume <span class="comment">#pvc 名字</span></span><br><span class="line">spec:</span><br><span class="line"> storageClassName: csi-hostpath-sc</span><br><span class="line"> accessModes:</span><br><span class="line"> - ReadWriteOnce <span class="comment"># 注意，考试时的访问模式可能有 ReadWriteMany 和 ReadOnlyMany 和 ReadWriteOnce，根据题目要求写。</span></span><br><span class="line"> resources:</span><br><span class="line"> requests:</span><br><span class="line"> storage: 10Mi</span><br><span class="line"><span class="comment">#创建 PVC</span></span><br><span class="line">kubectl apply -f pvc.yaml</span><br><span class="line"><span class="comment">#如果上面操作失败，则只能将 3 台虚拟机回退快照，重新做这道题，没有修改的机会。所以确保一次做对。</span></span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line">kubectl get pvc</span><br><span class="line"></span><br><span class="line">vim pvc-pod.yaml</span><br><span class="line"><span class="comment">#注意 :set paste，防止 yaml 文件空格错序。</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line"> name: web-server</span><br><span class="line">spec:</span><br><span class="line"> volumes:</span><br><span class="line"> - name: task-pv-storage <span class="comment">#绿色的两个 name 要一样。</span></span><br><span class="line"> persistentVolumeClaim:</span><br><span class="line"> claimName: pv-volume <span class="comment">#这个要使用上面创建的 pvc 名字</span></span><br><span class="line"> containers:</span><br><span class="line"> - name: nginx</span><br><span class="line"> image: nginx:1.16</span><br><span class="line"> volumeMounts:</span><br><span class="line"> - mountPath: <span class="string">&quot;/usr/share/nginx/html&quot;</span></span><br><span class="line"> name: task-pv-storage <span class="comment">#绿色的两个 name 要一样。</span></span><br><span class="line"><span class="comment">#创建</span></span><br><span class="line">kubectl apply -f pvc-pod.yaml</span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line">kubectl get pod web-server</span><br><span class="line"><span class="comment">#更改大小，并记录过程。</span></span><br><span class="line"><span class="comment"># 将 storage: 10Mi 改为 storage: 70Mi （模拟环境里会报错，下面有解释。）</span></span><br><span class="line"><span class="comment"># 注意是修改上面的 spec:里面的 storage:</span></span><br><span class="line">kubectl edit pvc pv-volume --record <span class="comment">#模拟环境是 nfs 存储，操作时，会有报错忽略即可。考试时用的动态存储，不会报错的。</span></span><br><span class="line"><span class="comment">#模拟环境使用的是 nfs 做后端存储，是不支持动态扩容 pvc 的（:wq 保存退出时，会报错）。</span></span><br><span class="line"><span class="comment">#所以最后一步修改为 70Mi，只是操作一下即可。换成 ceph 做后端存储，可以，但是集群资源太少，无法做 ceph。</span></span><br></pre></td></tr></table></figure>



<hr>
<h1 id="12-查看-pod-日志-简单"><a href="#12-查看-pod-日志-简单" class="headerlink" title="12. 查看 pod 日志(简单)"></a>12. 查看 pod 日志(简单)</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong></p>
<p>   [candidate@node-1] $ kubectl config use-context k8s </p>
<p>  <strong>Task</strong> </p>
<p>  监控 pod foo 的日志并： </p>
<p>  提取与错误 RLIMIT_NOFILE 相对应的日志行 </p>
<p>  将这些日志行写入 &#x2F;opt&#x2F;KUTR00101&#x2F;foo</p>
</blockquote>
<p><strong>考点：kubectl logs 命令</strong></p>
<p>参考链接  </p>
<p>没必要参考网址，使用-h 帮助更方便。 </p>
<p>kubectl -h </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/docs/tasks/debug/debug-application/debug-running-pod/#examine-pod-logs">https://kubernetes.io/docs/tasks/debug/debug-application/debug-running-pod/#examine-pod-logs</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context k8s</span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line">kubectl logs foo | grep <span class="string">&quot;RLIMIT_NOFILE&quot;</span> &gt; /opt/KUTR00101/foo</span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line"><span class="built_in">cat</span> /opt/KUTR00101/foo</span><br></pre></td></tr></table></figure>



<hr>
<h1 id="13-使用-sidecar-代理容器日志"><a href="#13-使用-sidecar-代理容器日志" class="headerlink" title="13. 使用 sidecar 代理容器日志"></a>13. 使用 sidecar 代理容器日志</h1><p><strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong></p>
<p>   [candidate@node-1] $ kubectl config use-context k8s </p>
<p>  <strong>Context</strong> </p>
<p>  将一个现有的 Pod 集成到 Kubernetes 的内置日志记录体系结构中（例如 kubectl logs）。 </p>
<p>  添加 streaming sidecar 容器是实现此要求的一种好方法。 </p>
<p>  <strong>Task</strong> </p>
<p>  使用 busybox Image 来将名为 sidecar 的 sidecar 容器添加到现有的 Pod 11-factor-app 中。 </p>
<p>  新的 sidecar 容器必须运行以下命令： </p>
<p>  &#x2F;bin&#x2F;sh -c tail -n+1 -f &#x2F;var&#x2F;log&#x2F;11-factor-app.log </p>
<p>  使用挂载在&#x2F;var&#x2F;log 的 Volume，使日志文件 11-factor-app.log 可用于 sidecar 容器。 </p>
<p>  除了添加所需要的 volume mount 以外，请勿更改现有容器的规格。</p>
</blockquote>
<p><u>考题翻译成白话，就是：</u> </p>
<p><u>添加一个名为 sidecar 的边车容器(使用 busybox 镜像)，加到已有的 pod 11-factor-app 中。</u> </p>
<p><u>确保 sidecar 容器能够输出 &#x2F;var&#x2F;log&#x2F;11-factor-app.log 的信息。</u> </p>
<p><u>使用 volume 挂载 &#x2F;var&#x2F;log 目录，确保 sidecar 能访问 11-factor-app.log 文件</u></p>
<p><strong>考点：pod 两个容器共享存储卷</strong></p>
<p>参考链接  </p>
<p>（需要复制网页内容） </p>
<p>依次点击 Concepts → Cluster Administration → Logging Architecture （看不懂英文的，可右上角翻译成中文） </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/concepts/cluster-administration/logging/">https://kubernetes.io/zh-cn/docs/concepts/cluster-administration/logging/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context k8s</span><br><span class="line"><span class="comment">#通过 kubectl get pod -o yaml 的方法备份原始 pod 信息，删除旧的 pod 11-factor-app</span></span><br><span class="line"><span class="comment">#copy 一份新 yaml 文件，添加 一个名称为 sidecar 的容器</span></span><br><span class="line"><span class="comment">#新建 emptyDir 的卷，确保两个容器都挂载了 /var/log 目录</span></span><br><span class="line"><span class="comment">#新建含有 sidecar 的 pod，并通过 kubectl logs 验证</span></span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line"><span class="comment"># 导出这个 pod 的 yaml 文件</span></span><br><span class="line">kubectl get pod 11-factor-app -o yaml &gt; varlog.yaml</span><br><span class="line"><span class="comment"># 备份 yaml 文件，防止改错了，回退。</span></span><br><span class="line"><span class="built_in">cp</span> varlog.yaml varlog-bak.yaml</span><br><span class="line"><span class="comment"># 修改 varlog.yaml 文件</span></span><br><span class="line">vim varlog.yaml</span><br><span class="line"><span class="comment">#根据官方文档拷贝需要的信息，在《下面是运行两个边车容器的 Pod 的配置文件》里。</span></span><br><span class="line">spec:</span><br><span class="line">。。。。。。</span><br><span class="line"> volumeMounts: <span class="comment">#在原配置文件，灰色的这段后面添加</span></span><br><span class="line"> - mountPath: /var/run/secrets/kubernetes.io/serviceaccount</span><br><span class="line"> name: default-token-4l6w8</span><br><span class="line"> readOnly: <span class="literal">true</span></span><br><span class="line"> - name: varlog <span class="comment">#新加内容</span></span><br><span class="line"> mountPath: /var/log <span class="comment">#新加内容</span></span><br><span class="line"> - name: sidecar <span class="comment">#新加内容，注意 name 别写错了</span></span><br><span class="line"> image: busybox <span class="comment">#新加内容</span></span><br><span class="line"> args: [/bin/sh, -c, <span class="string">&#x27;tail -n+1 -f /var/log/11-factor-app.log&#x27;</span>] <span class="comment">#新加内容，注意 文件名 别写错了。另外是用逗号分隔的，而题目里是空格。</span></span><br><span class="line"> volumeMounts: <span class="comment">#新加内容</span></span><br><span class="line"> - name: varlog <span class="comment">#新加内容</span></span><br><span class="line"> mountPath: /var/log <span class="comment">#新加内容</span></span><br><span class="line"> dnsPolicy: ClusterFirst</span><br><span class="line"> enableServiceLinks: <span class="literal">true</span></span><br><span class="line">。。。。。。</span><br><span class="line"> volumes: <span class="comment">#在原配置文件，灰色的这段后面添加。</span></span><br><span class="line"> - name: kube-api-access-kcjc2</span><br><span class="line"> projected:</span><br><span class="line"> defaultMode: 420</span><br><span class="line"> sources:</span><br><span class="line"> - serviceAccountToken:</span><br><span class="line"> expirationSeconds: 3607</span><br><span class="line"> path: token</span><br><span class="line"> - configMap:</span><br><span class="line"> items:</span><br><span class="line"> - key: ca.crt</span><br><span class="line"> path: ca.crt</span><br><span class="line"> name: kube-root-ca.crt</span><br><span class="line"> - downwardAPI:</span><br><span class="line"> items:</span><br><span class="line"> - fieldRef:</span><br><span class="line"> apiVersion: v1</span><br><span class="line"> fieldPath: metadata.namespace</span><br><span class="line"> path: namespace</span><br><span class="line"> - name: varlog <span class="comment">#新加内容，注意找好位置。</span></span><br><span class="line"> emptyDir: &#123;&#125; <span class="comment">#新加内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除原先的 pod，大于需要等 2 分钟，中途不要 CTRL+C 终止命令。</span></span><br><span class="line">kubectl delete pod 11-factor-app</span><br><span class="line"><span class="comment"># 检查一下是否删除了</span></span><br><span class="line">kubectl get pod 11-factor-app</span><br><span class="line"><span class="comment"># 新建这个 pod</span></span><br><span class="line">kubectl apply -f varlog.yaml</span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line"><span class="comment"># 考试时，仅使用第一条检查一下结果即可</span></span><br><span class="line">kubectl logs 11-factor-app sidecar</span><br><span class="line"><span class="comment"># kubectl exec 11-factor-app -c sidecar -- tail -f /var/log/11-factor-app.log</span></span><br><span class="line"><span class="comment"># kubectl exec 11-factor-app -c count -- tail -f /var/log/11-factor-app.log</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<hr>
<h1 id="14-升级集群"><a href="#14-升级集群" class="headerlink" title="14. 升级集群"></a>14. 升级集群</h1><p> <strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong> </p>
<p>  [candidate@node-1] $ kubectl config use-context mk8s </p>
<p>  <strong>Task</strong> </p>
<p>  现有的 Kubernetes 集群正在运行版本 1.27.0。仅将 master 节点上的所有 Kubernetes 控制平面和节点组件升级到版本 1.27.1。 </p>
<p>  确保在升级之前 drain master 节点，并在升级后 uncordon master 节点。 </p>
<p>  可以使用以下命令，通过 ssh 连接到 master 节点： </p>
<p>  ssh master01 </p>
<p>  可以使用以下命令，在该 master 节点上获取更高权限： </p>
<p>  sudo -i </p>
<p>  另外，在主节点上升级 kubelet 和 kubectl。 </p>
<p>  请不要升级工作节点，etcd，container 管理器，CNI 插件， DNS 服务或任何其他插件。</p>
</blockquote>
<p><strong>（注意，考试敲命令时，注意要升级的版本，根据题目要求输入具体的升级版本！！！）</strong></p>
<p><strong>考点：如何离线主机，并升级控制面板和升级节点</strong></p>
<p>参考链接  </p>
<p>没必要参考网址，建议多练习，背过命令就行。 </p>
<p>记不清的，可以使用 kubectl -h 来帮助。 </p>
<p>如果非要参考，可以按照下面方法。 </p>
<p>依次点击 Tasks → Administer a Cluster → Administration with kubeadm → Upgrading kubeadm clusters （看不懂英文的，可右上角翻译成中文） </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/">https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context mk8s</span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line">kubectl get nodes</span><br><span class="line"><span class="comment"># cordon 停止调度，将 node 调为 SchedulingDisabled。新 pod 不会被调度到该 node，但在该 node 的旧 pod 不受影响。</span></span><br><span class="line"><span class="comment"># drain 驱逐节点。首先，驱逐该 node 上的 pod，并在其他节点重新创建。接着，将节点调为 SchedulingDisabled。</span></span><br><span class="line"><span class="comment"># 所以 kubectl cordon master01 这条，可写可不写。但我一向做事严谨，能复杂，就绝不简单了事。。。所以就写了。</span></span><br><span class="line">kubectl cordon master01</span><br><span class="line">kubectl drain master01 --ignore-daemonsets</span><br><span class="line"><span class="comment"># ssh 到 master 节点，并切换到 root 下</span></span><br><span class="line">ssh master01</span><br><span class="line">sudo -i</span><br><span class="line">apt-get update</span><br><span class="line">apt-cache show kubeadm|grep 1.27.1</span><br><span class="line">apt-get install kubeadm=1.27.1-00</span><br><span class="line"><span class="comment">#检查 kubeadm 升级后的版本</span></span><br><span class="line">kubeadm version</span><br><span class="line"><span class="comment"># 验证升级计划，会显示很多可升级的版本，我们关注题目要求升级到的那个版本。</span></span><br><span class="line">kubeadm upgrade plan</span><br><span class="line"><span class="comment"># 排除 etcd，升级其他的，提示时，输入 y。大约要等 5 分钟。</span></span><br><span class="line">kubeadm upgrade apply v1.27.1 --etcd-upgrade=<span class="literal">false</span></span><br><span class="line"><span class="comment">#升级 kubelet</span></span><br><span class="line">apt-get install kubelet=1.27.1-00</span><br><span class="line">kubelet --version</span><br><span class="line"><span class="comment">#升级 kubectl</span></span><br><span class="line">apt-get install kubectl=1.27.1-00</span><br><span class="line">kubectl version</span><br><span class="line"><span class="comment"># 退出 root，退回到 candidate@master01</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 退出 master01，退回到 candidate@node01</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment">#恢复 master01 调度</span></span><br><span class="line">kubectl uncordon master01</span><br><span class="line"><span class="comment">#检查 master01 是否为 Ready</span></span><br><span class="line">kubectl get node</span><br></pre></td></tr></table></figure>



<hr>
<h1 id="15-备份还原-etcd"><a href="#15-备份还原-etcd" class="headerlink" title="15. 备份还原 etcd"></a>15. 备份还原 etcd</h1><p> <strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境</strong> </p>
<p>  此项目无需更改配置环境。但是，在执行此项目之前，请确保您已返回初始节点。 </p>
<p>  [candidate@master01] $ exit </p>
<p>  #注意，这个之前是在 master01 上，所以要 exit 退到 node01，如果已经是 node01 了，就不要再 exit 了。 </p>
<p>  <strong>Task</strong> </p>
<p>  首先，为运行在 <a target="_blank" rel="noopener" href="https://11.0.1.111:2379/">https://11.0.1.111:2379</a> 上的现有 etcd 实例创建快照并将快照保存到 &#x2F;var&#x2F;lib&#x2F;backup&#x2F;etcd-snapshot.db </p>
<p>  （注意，真实考试中，这里写的是 <a href="https://127.0.0.1:2379）">https://127.0.0.1:2379）</a> </p>
<p>  为给定实例创建快照预计能在几秒钟内完成。 如果该操作似乎挂起，则命令可能有问题。用 CTRL + C 来取消操作，然后重试。 </p>
<p>  然后还原位于&#x2F;data&#x2F;backup&#x2F;etcd-snapshot-previous.db 的现有先前快照。 </p>
<p>  提供了以下 TLS 证书和密钥，以通过 etcdctl 连接到服务器。 </p>
<p>  CA 证书: &#x2F;opt&#x2F;KUIN00601&#x2F;ca.crt </p>
<p>  客户端证书: &#x2F;opt&#x2F;KUIN00601&#x2F;etcd-client.crt </p>
<p>  客户端密钥: &#x2F;opt&#x2F;KUIN00601&#x2F;etcd-client.key</p>
</blockquote>
<p><strong>考点：etcd 的备份和还原命令</strong></p>
<p>参考链接  </p>
<p>没必要参考网址，建议多练习，背过命令就行。 </p>
<p>记不清的，可以使用 etcdctl -h 来帮助，更方便。 </p>
<p>如果非要参考，可以按照下面方法。 </p>
<p>依次点击 Tasks → Administer a Cluster → Operating etcd clusters for Kubernetes （看不懂英文的，可右上角翻译成中文） </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/configure-upgrade-etcd/">https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/configure-upgrade-etcd/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">暂略</span><br></pre></td></tr></table></figure>



<hr>
<h1 id="16-排查集群中故障节点（简单，分高）"><a href="#16-排查集群中故障节点（简单，分高）" class="headerlink" title="16. 排查集群中故障节点（简单，分高）"></a>16. 排查集群中故障节点（简单，分高）</h1><p> <strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong> </p>
<p>  [candidate@node-1] $ kubectl config use-context wk8s </p>
<p>  <strong>Task</strong> </p>
<p>  名为 node02 的 Kubernetes worker node 处于 NotReady 状态。 </p>
<p>  调查发生这种情况的原因，并采取相应的措施将 node 恢复为 Ready 状态，确保所做的任何更改永久生效。</p>
<p>  可以使用以下命令，通过 ssh 连接到 node02 节点： </p>
<p>  ssh node02 </p>
<p>  可以使用以下命令，在该节点上获取更高权限： </p>
<p>  sudo -i</p>
</blockquote>
<p>参考链接  </p>
<p>没必要参考网址，记住先 restart 再 enable 就行。 </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/setup/production-environment/tools/kubeadm/kubelet-integration/">https://kubernetes.io/zh-cn/docs/setup/production-environment/tools/kubeadm/kubelet-integration/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context wk8s</span><br><span class="line"><span class="comment">#通过 get nodes 查看异常节点，登录节点查看 kubelet 等组件的 status 并判断原因。</span></span><br><span class="line"><span class="comment">#真实考试时，这个异常节点的 kubelet 服务没有启动导致的，就这么简单。</span></span><br><span class="line"><span class="comment">#执行初始化这道题的脚本 a.sh，模拟 node02 异常。</span></span><br><span class="line"><span class="comment">#（考试时，不需要执行的！考试时切到这道题的集群后，那个 node 就是异常的。）</span></span><br><span class="line"><span class="comment">#在 candidate@node01 上执行</span></span><br><span class="line">sudo sh /opt/sh/a.sh</span><br><span class="line"><span class="comment">#执行完 a.sh 脚本后，等 3 分钟，node02 才会挂掉。</span></span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line"><span class="comment">#检查一下 node，发现 node02 异常，等 3 分钟，node02 才会挂掉。</span></span><br><span class="line">kubectl get nodes</span><br><span class="line"><span class="comment"># ssh 到 node02 节点，并切换到 root 下</span></span><br><span class="line">ssh node02</span><br><span class="line">sudo -i</span><br><span class="line"><span class="comment">#检查 kubelet 服务，考试时，会发现服务没有启动</span></span><br><span class="line">systemctl status kubelet</span><br><span class="line"><span class="comment"># 启动服务，并设置为开机启动</span></span><br><span class="line">systemctl start kubelet</span><br><span class="line">systemctl <span class="built_in">enable</span> kubelet</span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line">systemctl status kubelet</span><br><span class="line"><span class="comment"># 退出 root，退回到 candidate@node02</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 退出 node02，退回到 candidate@node01</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment">#再次检查节点， 确保 node02 节点恢复 Ready 状态</span></span><br><span class="line">kubectl get nodes</span><br></pre></td></tr></table></figure>



<hr>
<h1 id="17-节点维护-简单"><a href="#17-节点维护-简单" class="headerlink" title="17. 节点维护(简单)"></a>17. 节点维护(简单)</h1><p> <strong>考题：</strong></p>
<blockquote>
<p>  <strong>设置配置环境：</strong> </p>
<p>  [candidate@node-1] $ kubectl config use-context ek8s </p>
<p>  <strong>Task</strong> </p>
<p>  将名为 node02 的 node 设置为不可用，并重新调度该 node 上所有运行的 pods。</p>
</blockquote>
<p><strong>考点：cordon 和 drain 命令的使用</strong></p>
<p>参考链接  </p>
<p>没必要参考网址，使用-h 帮助更方便。 </p>
<p>kubectl -h </p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/safely-drain-node/">https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/safely-drain-node/</a></p>
<p>解答：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#考试时务必执行，切换集群。模拟环境中不需要执行。</span></span><br><span class="line">kubectl config use-context ek8s</span><br><span class="line"><span class="comment">#开始操作</span></span><br><span class="line">kubectl get node</span><br><span class="line">kubectl cordon node02</span><br><span class="line">kubectl get node</span><br><span class="line">kubectl drain node02 --ignore-daemonsets</span><br><span class="line"><span class="comment"># 注意，还有一个参数--delete-emptydir-data --force，这个考试时不用加，就可以正常 draini node02 的。</span></span><br><span class="line"><span class="comment"># 但如果执行后，有跟测试环境一样的报错（如下截图），则需要加上--delete-emptydir-data --force，会强制将 pod 移除。</span></span><br><span class="line"><span class="comment"># kubectl drain node02 --ignore-daemonsets --delete-emptydir-data --force</span></span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line">kubectl get node</span><br><span class="line">kubectl get pod -A -o wide|grep node02</span><br><span class="line"><span class="comment"># 正常已经没有 pod 在 node02 上了。但测试环境里的 ingress、calico、kube-proxy 是 daemonsets 模式的，所以显示还在 node02 上，忽略即可。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/k8s/">k8s</a></div><div class="post_share"><div class="social-share" data-image="https://github.com/HDXP/storage/blob/master/avatar.jpg?raw=true" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/06/26/%E5%90%AF%E5%8A%A8docker%E5%AE%B9%E5%99%A8%E6%8A%A5%E9%94%99Failed%20to%20Setup%20IP%20tables/" title="启动docker容器报错Failed to Setup IP tables"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">启动docker容器报错Failed to Setup IP tables</div></div></a></div><div class="next-post pull-right"><a href="/2023/06/04/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7kubectl%E4%BB%8B%E7%BB%8D/" title="命令行工具kubectl介绍"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">命令行工具kubectl介绍</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/06/04/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7kubectl%E4%BB%8B%E7%BB%8D/" title="命令行工具kubectl介绍"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-04</div><div class="title">命令行工具kubectl介绍</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://github.com/HDXP/storage/blob/master/avatar.jpg?raw=true" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">邯郸小胖</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">5</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hdxp"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/hdxp" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:zhanghengning@foxmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">永远相信美好的事情即将发生</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6RBAC"><span class="toc-number">1.</span> <span class="toc-text">1. 权限控制RBAC</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E6%9F%A5%E7%9C%8Bpod%E7%9A%84cpu%EF%BC%88%E7%AE%80%E5%8D%95%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">2. 查看pod的cpu（简单）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E7%AD%96%E7%95%A5-NetworkPolicy"><span class="toc-number">3.</span> <span class="toc-text">3. 配置网络策略 NetworkPolicy</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E6%9A%B4%E9%9C%B2%E6%9C%8D%E5%8A%A1-service"><span class="toc-number">4.</span> <span class="toc-text">4. 暴露服务 service</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%88%9B%E5%BB%BA-Ingress"><span class="toc-number">5.</span> <span class="toc-text">5. 创建 Ingress</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E6%89%A9%E5%AE%B9-deployment-%E5%89%AF%E6%9C%AC%E6%95%B0%E9%87%8F%EF%BC%88%E7%AE%80%E5%8D%95%EF%BC%89"><span class="toc-number">6.</span> <span class="toc-text">6. 扩容 deployment 副本数量（简单）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E8%B0%83%E5%BA%A6-pod-%E5%88%B0%E6%8C%87%E5%AE%9A%E8%8A%82%E7%82%B9"><span class="toc-number">7.</span> <span class="toc-text">7. 调度 pod 到指定节点</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E6%9F%A5%E7%9C%8B%E5%8F%AF%E7%94%A8%E8%8A%82%E7%82%B9%E6%95%B0%E9%87%8F-%E7%AE%80%E5%8D%95"><span class="toc-number">8.</span> <span class="toc-text">8. 查看可用节点数量(简单)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E5%88%9B%E5%BB%BA%E5%A4%9A%E5%AE%B9%E5%99%A8%E7%9A%84-pod-%E7%AE%80%E5%8D%95"><span class="toc-number">9.</span> <span class="toc-text">9. 创建多容器的 pod(简单)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E5%88%9B%E5%BB%BA-PV"><span class="toc-number">10.</span> <span class="toc-text">10. 创建 PV</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E5%88%9B%E5%BB%BA-PVC"><span class="toc-number">11.</span> <span class="toc-text">11. 创建 PVC</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12-%E6%9F%A5%E7%9C%8B-pod-%E6%97%A5%E5%BF%97-%E7%AE%80%E5%8D%95"><span class="toc-number">12.</span> <span class="toc-text">12. 查看 pod 日志(简单)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#13-%E4%BD%BF%E7%94%A8-sidecar-%E4%BB%A3%E7%90%86%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97"><span class="toc-number">13.</span> <span class="toc-text">13. 使用 sidecar 代理容器日志</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#14-%E5%8D%87%E7%BA%A7%E9%9B%86%E7%BE%A4"><span class="toc-number">14.</span> <span class="toc-text">14. 升级集群</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#15-%E5%A4%87%E4%BB%BD%E8%BF%98%E5%8E%9F-etcd"><span class="toc-number">15.</span> <span class="toc-text">15. 备份还原 etcd</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#16-%E6%8E%92%E6%9F%A5%E9%9B%86%E7%BE%A4%E4%B8%AD%E6%95%85%E9%9A%9C%E8%8A%82%E7%82%B9%EF%BC%88%E7%AE%80%E5%8D%95%EF%BC%8C%E5%88%86%E9%AB%98%EF%BC%89"><span class="toc-number">16.</span> <span class="toc-text">16. 排查集群中故障节点（简单，分高）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#17-%E8%8A%82%E7%82%B9%E7%BB%B4%E6%8A%A4-%E7%AE%80%E5%8D%95"><span class="toc-number">17.</span> <span class="toc-text">17. 节点维护(简单)</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/27/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%BB%BA%E8%BF%9E%E4%B8%8ETCP%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E6%8B%86%E8%BF%9E%E7%9A%84%E8%BF%87%E7%A8%8B%E6%8F%8F%E8%BF%B0/" title="TCP三次握手建连与TCP四次挥手拆连的过程描述">TCP三次握手建连与TCP四次挥手拆连的过程描述</a><time datetime="2023-06-27T17:30:00.000Z" title="发表于 2023-06-27 17:30:00">2023-06-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/26/%E5%90%AF%E5%8A%A8docker%E5%AE%B9%E5%99%A8%E6%8A%A5%E9%94%99Failed%20to%20Setup%20IP%20tables/" title="启动docker容器报错Failed to Setup IP tables">启动docker容器报错Failed to Setup IP tables</a><time datetime="2023-06-26T15:30:00.000Z" title="发表于 2023-06-26 15:30:00">2023-06-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/04/CKA%E8%80%83%E8%AF%95%E8%80%83%E9%A2%98/" title="CKA考试题">CKA考试题</a><time datetime="2023-06-04T10:30:00.000Z" title="发表于 2023-06-04 10:30:00">2023-06-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/04/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7kubectl%E4%BB%8B%E7%BB%8D/" title="命令行工具kubectl介绍">命令行工具kubectl介绍</a><time datetime="2023-06-04T10:30:00.000Z" title="发表于 2023-06-04 10:30:00">2023-06-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/31/%E7%BD%91%E7%BB%9C%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E7%9B%B8%E5%85%B3%E6%8C%87%E6%A0%87/" title="网络性能监控相关指标">网络性能监控相关指标</a><time datetime="2023-05-31T10:30:00.000Z" title="发表于 2023-05-31 10:30:00">2023-05-31</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 邯郸小胖</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>